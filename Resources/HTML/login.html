<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta name="viewport" content="width=320, user-scalable=no">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Login</title>
        <link rel="stylesheet" href="style.css" type="text/css" media="screen"
        title="no title" charset="utf-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <!-- <script src="js/userName.js"></script> -->
        <!-- <script src="/js/jquery.cookie.js"></script> -->
        <!-- <script src="js/login.js"></script> -->
        <script>
        	var isLoggedIn;
        	var uName = null;
        	var pWord = null;
        	
        	//add listeners for Ti events
        	//is fired when the user logs in successfully
			Ti.App.addEventListener('login:loginSuccess', function() {
				window.location = "index.html";
			});
			
			Ti.App.addEventListener('schedule:loginSuccess', function() {
				
				window.location.href = "mySchedule.html";
			});
			
			//is fired when the user name is requested from the server
			Ti.App.addEventListener('login:sendUsername', function(e) {
				// Ti.API.info('username received as: ' + e.username);
				uName = e.username;
				$("#userNameField").attr('value', uName);
			});
		
			/**
			 *   gets the username and password and passes them to the authentication method
			 */
			function logIn() {
				// window.location.href = "index.html";
				uName = document.getElementById('userNameField').value;
				pWord = document.getElementById('passwordField').value;
				
				//TODO: Change this back
				Ti.App.fireEvent('login:openLoginRequest', {username: 'bwood1', password: 'BOrd5621!!'});
			}
			
			/**
			 * Checks to see if the username is saved in the properties file.
			 * If it is then auto populates the username field.
			 */
			function checkUsername() {
				Ti.App.fireEvent('login:getUNameFromProperties');
			}
			
			$(document).ready(function() {
				// Ti.API.info('Login.html opened');
				checkUsername();
			});
        </script>
    </head>
    <body onload="">
        <div id="Screen">
            <!-- Banner -->
            <!-- Top content -->
            <div style="padding: 5% 5% 10% 5%">
                <!-- LoginButton -->
                <div id="backDiv">
                    <img width="100%" height="100%" onclick="Ti.App.fireEvent('login:backPressed');"
                    src="" alt="backButton">
                    <figcaption>
                        Back
                    </figcaption>
                </div>
                <!-- /LoginButton -->
                <!-- myGGC Banner -->
                <div id="bannerDiv">
                    <img alt="bannerImage" src="images/icons.png" width="100%"
                    height="100%">
                </div>
            </div>
            <!-- /TopContent -->
            <br />
            <br />
            <!-- content -->
            <div id="loginContent" style="text-align: left;">
                <form id="loginForm">
                    <!-- username -->
                    <div>
                        <div id="userNameLabel" class="passwordLabels">
                            User Name:
                        </div>
                        <span style="width: 10%; display: inline-block"></span>
                        <input id="userNameField" type="text" style="width: 30%;
                         display: inline-block;" />
                    </div>
                    <!-- /username -->
                    <!-- password -->
                    <div>
                        <div id="passwordLabel" class="passwordLabels">
                            Password:
                        </div>
                        <span style="width: 10%; display: inline-block"></span>
                        <input id="passwordField" type="password" style="width: 30%; display: 
                            inline-block;" />
                    </div>
                    <!-- /password -->
                </form>
                <div style="text-align: right; padding-right: 20%">
                    <button id="loginButton" onclick="logIn();">
                        Sign In
                    </button>
                </div>
            </div>
            <!--/content -->
            <!-- <div id="hiddeniFrame" >
            	<iframe id="myFrame" src=""></iframe>
            </div> -->
        </div>
    </body>
</html>