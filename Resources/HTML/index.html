<!DOCTYPE html>
<!--
* @file index.html
*
* Template application that shows examples of how to access
* device services from JavaScript using the Wormhole library.
-->

<!--
    TODO:
    change onclick methods to work for HTML
-->
<html>
    <head>
        <meta name="viewport" content="user-scalable=no">
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>myGGC Info</title>
        <link rel="stylesheet" href="style.css" type="text/css" media="screen"
        title="no title" charset="utf-8">
        <!-- <script type="text/javascript" charset="utf-8" src="js/wormhole.js"></script> -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <!-- <script src="js/checkLogInStatus.js"></script> -->
        <script type="text/javascript">
			var screenWidth = 0;
			var screenHeight = 0;
			var username;
			var isLoggedIn;
			
			//add event listeners
			
			Ti.App.addEventListener('index:sendLoggedInStatus', function(e) {
				// alert('index:sendLoggedInStatus');
				isLoggedIn = e.status;
				// alert('The logged in status is ' + isLoggedIn);
				loadLogInOutButton();
			});
			
			Ti.App.addEventListener('index:swipeUp', function() {
				socialMediaUp();
			});
			
			Ti.App.addEventListener('index:swipeDown', function() {
				socialMediaDown();
			});
			
			/**
			 * Checks to see if the user is logged in. If so then displays the log out button.
			 * If not, displays the log in button.
			 */
			function loadLogInOutButton() {
				if( isLoggedIn) {
					Ti.API.info('Set Log out button to show');
					$("#loginDiv").css('display', 'none');
					$("#logoutDiv").css('display', 'inline-block');
				} else {
					Ti.API.info('Set Log In button to show');
					$("#logoutDiv").css('display', 'none');
					$("#loginDiv").css('display', 'inline-block');		
				}
			}
			
			/**
			 * Fires the log out event to send the log out request to the server and then 
			 * displays the log in button.
			 */
			function logOut() {
				isLoggedIn = false;
				Ti.App.fireEvent("index:logoutRequest");
				Ti.API.info('Set Log In button to show');
				// $("#logoutDiv").css('display', 'none');
				// $("#loginDiv").css('display', 'inline-block');
				// $("#logInOutButton").attr({
					// alt: 'logInButton',
					// onClick: 'document.location="login.html"'
				// });
				// $("#logInOutCaption").html('Log In');
			}
			
			function showSocialMedia() {
				if($("#socialMedia").css("bottom") == "-75px") {
					$("#socialMedia").animate({bottom: "-20px"}, 500);
					$("#socialUpButton").attr('src', 'images/socialMediaIcons/Social_Media_down.png');
				} else {
					$("#socialMedia").animate({bottom: "-75px"}, 500);
					$("#socialUpButton").attr('src', 'images/socialMediaIcons/Social_Media_up.png');
				}
			}
			
			function socialMediaUp() {
				$("#socialMedia").animate({bottom: '-20px'}, 500);
				$("#socialMediaUpButton").attr('src', 'images/socialMediaIcons/Social_Media_down.png');
			}
			
			function socialMediaDown() {
				$("#socialMedia").animate({bottom: '-75px'}, 500);
				$("#socialMediaUpButton").attr('src', 'images/socialMediaIcons/Social_Media_up.png');
			}
			
			function getLoggedInStatus() {
				// alert('getLoggedInStatus called');
				Ti.App.fireEvent('index:getLoggedInStatus');
			}

			$(document).ready(function() {
				getLoggedInStatus();
			});
        </script>
    </head>
    <body>
        <div id="screen">
            <!-- Top content -->
            <div style="padding: 5% 5% 0% 5%;">
                <!-- backButton -->
                <div id="backDivHome">
                </div>
                <!-- /backButton -->
                <!-- myInfoBanner -->
                <div id="bannerDivHome">
                    <img alt="bannerImage" src="images/banners/MyInfoMobile_Logo.png">
                </div>
                <!-- /myInfoBanner -->
                <!-- loginButton -->
                <div id="loginDiv">
                    <img id="logInButton" width="100%" height="100%" src="images/homeIcons/Log_In_Button.png"
                    	alt="" onclick="Ti.App.fireEvent('index:openLogin');">
                    <!-- <figcaption>Log In</figcaption> -->
                </div>
                <!-- /loginButton -->
                <!-- logOutButton -->
                <div id="logoutDiv" style="display: none;">
                	<img id="logOutButton" width="100%" height="100%" src="images/homeIcons/Log_out_Button.png" 
                		alt="logOutButton" onclick="logOut();" />
                	<!-- <figcaption>Log Out</figcaption> -->
                </div>
                <!-- logOutButton -->

            </div>
            <!-- Top Content -->

            <!-- content -->
            <!-- Icons -->
            <div id="iconWrapper" style="margin: 0px auto;">
                <div id="icons" style="margin: 0px auto">
                    <!-- First Row of Icons -->
                    <div class="iconRow">
                        <!-- mySchedule Button -->
                        <div style="float: left">
                            <img class="icon" onclick="Ti.App.fireEvent('index:openSchedule');"
                            src="images/homeIcons/myScheduleIcon.png" alt="scheduleIcon">
                            <figcaption>
                                mySchedule
                            </figcaption>
                        </div>
                        <!-- myMentor Button -->
                        <div style="float: right">
                            <img class="icon" onclick="Ti.App.fireEvent('index:openMentor');"
                            src="images/homeIcons/myMentorIcon.png" alt="mentorIcon">
                            <figcaption>
                                myMentor
                            </figcaption>
                        </div>
                    </div>
                    <br>
                    <!-- Second Row of Icons -->
                    <div class="iconRow">
                        <!-- ggcNewsButton -->
                        <div style="float: left">
                            <img class="icon" onclick="Ti.App.fireEvent('index:openNews');"
                            src="images/homeIcons/news3.png" alt="ggcNewsIcon">
                            <figcaption>
                                GGC News
                            </figcaption>
                        </div>
                        <!-- /ggcNewsButton -->
                        <!-- What's Happening Button -->
                        <div style="float: right">
                            <img class="icon" onclick="Ti.App.fireEvent('index:openEvents');"
                            src="images/homeIcons/WhatsHappening.png"
                            alt="whatsHappeningIcon">
                            <figcaption>
                                What's
                                <br>
                                Happening
                            </figcaption>
                        </div>
                    </div>
                    <!-- /SecondRowIcons -->
                </div>
            </div>
            <!-- /Icons -->
        </div>
        <div id="socialMedia">
        	<div id="socialUpDiv">
        		<a href="#socialMedia", class=".toggle" onclick="showSocialMedia();">
        			<img id="socialUpButton"src="images/socialMediaIcons/Social_Media_up.png" />
        		</a>
        	</div>
        	<div id="socialMediaIcons" style="padding-top: 4%">
        	<a onclick="Ti.App.fireEvent('index:openFacebook')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/facebook.png" />
        	</a>
        	<span style="width: 10%; display: inline-block"></span>
        	<a onclick="Ti.App.fireEvent('index:openTwitter')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/twitter.png" />
        	</a>
        	<span style="width: 10%; display: inline-block"></span>
        	<a onclick="Ti.App.fireEvent('index:openYouTube')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/youtube.png" />
        	</a>
        	</div>
        </div>
    </body>
</html>
