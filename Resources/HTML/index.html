<!DOCTYPE html>
<!--
* @file index.html
*
* Template application that shows examples of how to access
* device services from JavaScript using the Wormhole library.
-->
<html>
    <head>
        <meta name="viewport" content="user-scalable=no">
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>myGGC Info</title>
        <link rel="stylesheet" href="style.css" type="text/css" media="screen"
        title="no title" charset="utf-8">
        <!-- <script type="text/javascript" charset="utf-8" src="js/wormhole.js"></script> -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <!-- <script src="js/checkLogInStatus.js"></script> -->
        <script type="text/javascript">
			var screenWidth = 0;
			var screenHeight = 0;
			var username;
			var isLoggedIn;
			
			//add event listeners
			
			Ti.App.addEventListener('index:sendLoggedInStatus', function(e) {
				isLoggedIn = e.status;
				Ti.API.info('The logged in status is ' + isLoggedIn);
				loadLogInOutButton();
			});
			
			/**
			 * Checks to see if the user is logged in. If so then displays the log out button.
			 * If not, displays the log in button.
			 */
			function loadLogInOutButton() {
				if( isLoggedIn) {
					Ti.API.info('Set Log out button to show');
					$("#loginDiv").css('display', 'none');
					$("#logoutDiv").css('display', 'inline-block');
				} else {
					Ti.API.info('Set Log In button to show');
					$("#logoutDiv").css('display', 'none');
					$("#loginDiv").css('display', 'inline-block');		
				}
			}
			
			/**
			 * Fires the log out event to send the log out request to the server and then 
			 * displays the log in button.
			 */
			function logOut() {
				isLoggedIn = false;
				Ti.App.fireEvent("index:logoutRequest");
				Ti.API.info('Set Log In button to show');
				$("#logoutDiv").css('display', 'none');
				$("#loginDiv").css('display', 'inline-block');
				// $("#logInOutButton").attr({
					// alt: 'logInButton',
					// onClick: 'document.location="login.html"'
				// });
				// $("#logInOutCaption").html('Log In');
			}
			
			function showSocialMedia() {
				if($("#socialMedia").css("bottom") == "-75px") {
					$("#socialMedia").animate({bottom: "-20px"}, 500);
				} else {
					$("#socialMedia").animate({bottom: "-75px"}, 500)
				}
			}
			
			
			function getLoggedInStatus() {
				// Ti.API.info('getLoggedInStatus called');
				Ti.App.fireEvent('index:getLoggedInStatus');
			}

			$(document).ready(function() {
				getLoggedInStatus();
			});
			
			// document.onload = window.getLoggedInStatus;
		
			// window.onbeforeunload = function(e) {
				// // Ti.API.info('onunload called');
			// }
			// window.onpopstate = function(event) {
				// Ti.API.info('onpopstate called');
			// }
			
			if(window.name == "reloader") {
				window.name = "no";
				reloadPage();
			}
        </script>
    </head>
    <body>
        <div id="screen">
            <!-- Top content -->
            <div style="padding: 5% 5% 10% 5%">
                <!-- backButton -->
                <div id="backDivHome">
                    <!-- <img id="backButton" width="100%" height="100%" src="images/logInButton.png"
                    	alt="" onclick="">
                    <figcaption></figcaption> -->
                </div>
                <!-- /backButton -->
                <!-- myGGC Banner -->
                <div id="bannerDivHome">
                    <img alt="bannerImage" src="images/banners/MyGGCMobile_Logo4.png" width="100%"
                    height="100%">
                </div>
                <!-- loginButton -->
                <div id="loginDiv">
                    <img id="logInOutButton" width="100%" height="100%" src="images/backButton.png"
                    	alt="" onclick="document.location='login.html'">
                    <figcaption>Log In</figcaption>
                </div>
                <!-- /loginButton -->
                <!-- loginoutButton -->
                <div id="logoutDiv" style="display: none;">
                	<img id="logOutButton" width="100%" height="100%" src="" alt="logOutButton" onclick="logOut();" />
                	<figcaption>Log Out</figcaption>
                </div>

            </div>
            <!-- Top Content -->

            <!-- content -->
            <!-- Icons -->
            <div id="iconWrapper" style="margin: 0px auto;">
                <div id="icons" style="margin: 0px auto">
                    <!-- First Row of Icons -->
                    <div class="iconRow">
                        <!-- mySchedule Button -->
                        <div style="float: left">
                            <img class="icon" onclick="document.location='mySchedule.html'"
                            src="images/homeIcons/myScheduleIcon.png" alt="scheduleIcon">
                            <figcaption>
                                mySchedule
                            </figcaption>
                        </div>
                        <!-- myMentor Button -->
                        <div style="float: right">
                            <img class="icon" onclick="document.location='myMentor.html'"
                            src="images/homeIcons/myMentorIcon.png" alt="mentorIcon">
                            <figcaption>
                                myMentor
                            </figcaption>
                        </div>
                    </div>
                    <br>
                    <!-- Second Row of Icons -->
                    <div class="iconRow">
                        <!-- ggcNewsButton -->
                        <div style="float: left">
                            <img class="icon" onclick="document.location='ggcNews.html'"
                            src="images/homeIcons/ggcNewsIcon.png" alt="campusMapIcon">
                            <figcaption>
                                GGC News
                            </figcaption>
                        </div>
                        <!-- /ggcNewsButton -->
                        <!-- What's Happening Button -->
                        <div style="float: right">
                            <img class="icon" onclick="document.location='whatsHappening.html'"
                            src="images/homeIcons/whatsHappeningIcon.png"
                            alt="whatsHappeningIcon">
                            <figcaption>
                                What's
                                <br>
                                Happening
                            </figcaption>
                        </div>
                    </div>
                    <!-- /SecondRowIcons -->
                </div>
            </div>
            <!-- /Icons -->
        </div>
        <div id="socialMedia">
        	<a href="#socialMedia", class=".toggle" onclick="showSocialMedia();">Social Media</a>
        	<br>
        	<div id="socialMediaIcons" style="padding-top: 4%">
        	<a onclick="Ti.App.fireEvent('index:openFacebook')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/facebook.png" />
        	</a>
        	<span style="width: 10%; display: inline-block"></span>
        	<a onclick="Ti.App.fireEvent('index:openTwitter')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/twitter.png" />
        	</a>
        	<span style="width: 10%; display: inline-block"></span>
        	<a onclick="Ti.App.fireEvent('index:openYouTube')">
        		<img class="socialMediaIcon" src="images/socialMediaIcons/youtube.png" />
        	</a>
        	</div>
        </div>
    </body>
</html>
